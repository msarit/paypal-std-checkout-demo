<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PayPal JS SDK Standard Integration Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>

  <body class="p-6">
    <h1 class="text-center text-4xl font-medium">LiftOff Shop</h1>
    <main class="products flex flex-wrap justify-center">
      <div
        class="product text-center m-3 p-3 border border-slate-400 rounded-md"
      >
        <img src="https://picsum.photos/id/21/200" class="rounded-md" />
        <h2 class="text-xl my-2">Galaxy Shoes</h2>
        <p class="text-green-600 font-medium text-lg mb-2">$100</p>
        <div class="mb-3">
          <label class="text-lg" for="quantity1">Quantity:</label>
          <select class="text-lg" id="quantity1">
            <option value="0">0</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
          </select>
        </div>
        <button
          class="py-1 px-3 rounded-md bg-indigo-200 hover:bg-indigo-300"
          onclick="addToCart('galaxyShoes','quantity1')"
        >
          Add to Cart
        </button>
      </div>

      <div
        class="product text-center m-3 p-3 border border-slate-400 rounded-md"
      >
        <img src="https://picsum.photos/id/104/200" class="rounded-md" />
        <h2 class="text-xl my-2">Spaceship Earrings</h2>
        <p class="text-green-600 font-medium text-lg mb-2">$40</p>
        <div class="mb-3">
          <label class="text-lg" for="quantity2">Quantity:</label>
          <select class="text-lg" id="quantity2">
            <option value="0">0</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
          </select>
        </div>
        <button
          class="py-1 px-3 rounded-md bg-indigo-200 hover:bg-indigo-300"
          onclick="addToCart('spaceshipEarrings', 'quantity2')"
        >
          Add to Cart
        </button>
      </div>

      <div
        class="product text-center m-3 p-3 border border-slate-400 rounded-md"
      >
        <img src="https://picsum.photos/id/342/200" class="rounded-md" />
        <h2 class="text-xl my-2">Martian Tote</h2>
        <p class="text-green-600 font-medium text-lg mb-2">$75</p>
        <div class="mb-3">
          <label class="text-lg" for="quantity3">Quantity:</label>
          <select class="text-lg" id="quantity3">
            <option value="0">0</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
          </select>
        </div>
        <button
          class="py-1 px-3 rounded-md bg-indigo-200 hover:bg-indigo-300"
          onclick="addToCart('martianTote', 'quantity3')"
        >
          Add to Cart
        </button>
      </div>
    </main>

    <section class="mt-8 flex">
      <div class="w-1/2" id="cart">
        <h2>Cart</h2>
        <ul id="cart-items"></ul>
        <p>TOTAL $<span id="cart-total">0</span></p>
        <p id="result-message"></p>
      </div>
      <div id="paypal-button-container"></div>
    </section>

    <script>
      const itemPrices = {
        galaxyShoes: 100,
        spaceshipEarrings: 40,
        martianTote: 75,
      };
      let cartItems = {};
      let cartTotal = 0;

      function addToCart(productName, quantityId) {
        const quantitySelect = document.getElementById(quantityId);
        const selectedQuantity = parseInt(quantitySelect.value, 10);

        if (selectedQuantity > 0) {
          const totalForProduct = itemPrices[productName] * selectedQuantity;
          cartItems[productName] = {
            quantity: selectedQuantity,
            total: totalForProduct,
          };
          cartTotal = calculateCartTotal();
          updateCart();
        }
      }

      function calculateCartTotal() {
        let total = 0;
        for (const key in cartItems) {
          if (cartItems.hasOwnProperty(key)) {
            total += cartItems[key].total;
          }
        }
        return total;
      }

      function updateCart() {
        const cartItemsList = document.getElementById("cart-items");
        const cartTotalElement = document.getElementById("cart-total");

        cartItemsList.innerHTML = "";
        cartTotalElement.textContent = cartTotal;

        for (const key in cartItems) {
          const li = document.createElement("li");
          li.textContent = `${key}: ${cartItems[key].quantity}`;
          cartItemsList.appendChild(li);
        }
      }
    </script>
    <script src="https://www.paypal.com/sdk/js?client-id=AYCd0wKOWs9itZ23_2XEZUhZpbZdHT_c1qcMCjqTnb6fxFE7tQBnUQGSPh3_PVQkgoBamFV1KgPUI9B4&components=buttons&enable-funding=venmo,paylater"></script>
    <script src="app.js"></script>
  </body>
</html>
